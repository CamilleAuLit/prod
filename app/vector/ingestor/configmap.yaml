apiVersion: v1
kind: ConfigMap
metadata:
  name: vector-ingest-config
  namespace: monitoring # ou le namespace o√π tu mets tes vectors
data:
  vector.yaml: |
    api:
      enabled: true
      address: "0.0.0.0:8686"

    sources:
      rabbitmq_source:
        type: "amqp"
        url: "amqp://admin:1234@10.0.0.99:5672/%2f"
        queue: "esp32-logs"

    sinks:
      kafka_sink:
        type: "kafka"
        inputs: ["k8s_logs"]
        bootstrap_servers: "prod-cluster-kafka-bootstrap.kafka.svc:9092"
        topic: "k3s-logs" # Topic tampon
        encoding:
          codec: "json"
