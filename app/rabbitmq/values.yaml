rabbitmq:
  image:
    registry: docker.io
    repository: rabbitmq
    tag: 4.2.2-management
    pullPolicy: IfNotPresent
  auth:
    username: admin
    password: "1234" # Change-le !
  extraPlugins:
    - rabbitmq_mqtt
    - rabbitmq_management
    - rabbitmq_peer_discovery_k8s
  service:
    type: LoadBalancer
    extraPorts:
      - name: mqtt
        port: 1883
        targetPort: 1883
        protocol: TCP
  persistence:
    enabled: true
    storageClass: "local-path" # Le standard sur K3s
    size: 2Gi
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 200m
      memory: 256Mi
  ingress:
    enabled: true
    hostname: rabbitmq.local
    path: /
    annotations:
      kubernetes.io/ingress.class: nginx
      # On d√©sactive la logique de probe par script du chart
  #livenessProbe:
  #  enabled: true
  #  exec: null
  #  httpGet: null
  #  initialDelaySeconds: 60

  #readinessProbe:
  #  enabled: true
  #  exec: null
  #  httpGet: null
  #  tcpSocket:
  #    port: 5672
  #  initialDelaySeconds: 20
  #  timeoutSeconds: 5
